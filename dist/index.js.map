{"version":3,"file":"index.js","sources":["../src/lib/DatePicker/index.tsx"],"sourcesContent":["import {faCalendar} from \"@fortawesome/free-solid-svg-icons\"\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\r\nimport {CSSProperties, FunctionComponent, useEffect, useRef, useState} from \"react\"\r\nimport DatePickerCalendar from \"../DatePickerCalendar\"\r\nimport \"./style.scss\"\r\n\r\ntype DatePickerProps = {\r\n  label: string\r\n  name: string\r\n  errorMessage?: string\r\n  error?: boolean\r\n  value?: string\r\n  lang?: string\r\n  year?: number\r\n  month?: number\r\n  day?: number\r\n  zIndex?: number\r\n  intervalYearsSelection?: number[]\r\n  elevationPicker?: boolean\r\n  headerPickerColor?: string\r\n  textColor?: string\r\n  focusColor?: string\r\n  errorColor?: string\r\n  borderColor?: string\r\n  borderRadius?: string\r\n  className?: string\r\n  onSelect?: CallableFunction\r\n}\r\n\r\nexport type DatePickerResult = {\r\n  date: Date,\r\n  value: string\r\n}\r\n\r\nconst DatePicker: FunctionComponent<DatePickerProps> = ({\r\n  label,\r\n  name,\r\n  errorMessage = \"Erreur message\",\r\n  error = false,\r\n  value = \"\",\r\n  lang = \"fr-FR\",\r\n  year, \r\n  month,\r\n  day,\r\n  intervalYearsSelection,\r\n  elevationPicker = false,\r\n  headerPickerColor = '#059ECE',\r\n  borderColor = '#DADCE0',\r\n  textColor = '#70757A',\r\n  focusColor = '#059ECE',\r\n  errorColor = '#EF6C6C',\r\n  borderRadius = '5px',\r\n  className,\r\n  zIndex = 999,\r\n  onSelect,\r\n}) => {\r\n\r\n  const inputDate = useRef<HTMLInputElement>(null)\r\n  const wrapperInputDate = useRef<HTMLInputElement>(null)\r\n  const wrapperDate = useRef<HTMLInputElement>(null)  \r\n\r\n  const [showCalendar, setShowCalendar] = useState<boolean>()\r\n  const [valueInput, setValueInput] = useState<string>(value)\r\n  const [errorStatus, setErrorStatus] = useState<boolean>(error)\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"mousedown\", (e: any) => {\r\n      e.stopPropagation()\r\n      if (wrapperDate.current && wrapperInputDate.current && !wrapperDate.current.contains(e.target) && !wrapperInputDate.current.contains(e.target) && showCalendar === true ) {\r\n        setShowCalendar(false)\r\n        inputDate.current?.blur()\r\n      }\r\n    });\r\n  }, [wrapperDate, showCalendar])\r\n\r\n  useEffect(() => {\r\n    setErrorStatus(error)\r\n  }, [error])\r\n\r\n  useEffect(() => {\r\n    setValueInput(value)\r\n  }, [value])\r\n\r\n  const displayDatePicker = (active?: boolean) => {\r\n    showCalendar ? inputDate.current?.blur() : inputDate.current?.focus()\r\n    setShowCalendar(active ?? !showCalendar)\r\n  }\r\n\r\n  return (\r\n    <div className={`date-picker ${className}`}>\r\n      <div\r\n        data-testid={'datepicker'} \r\n        ref={wrapperInputDate}\r\n        onClick={() => displayDatePicker()}        \r\n        className={`input-date ${valueInput !== \"\" ? \" input-date--active\" : \"\"}${errorStatus ? \" input-date--error\" : \"\"}${showCalendar ? \" input-date--focus\" : \"\"}`}\r\n        style={{\r\n          zIndex: zIndex,\r\n          '--text-color': textColor,\r\n          '--focus-color': focusColor,\r\n          '--error-color': errorColor,\r\n          '--border-color': borderColor,\r\n          '--border-radius': borderRadius,\r\n        } as CSSProperties}\r\n      >\r\n        <label htmlFor={name}>{label}</label>\r\n        <div className=\"input-date__content\">\r\n          <input data-testid=\"datepicker-input\" ref={inputDate} name={name} value={valueInput} readOnly={true} />\r\n          <i><FontAwesomeIcon icon={faCalendar}/></i>\r\n        </div>\r\n        { errorStatus && (<p className=\"input-date__error-message\">{errorMessage}</p>) }\r\n      </div>\r\n      <div \r\n        ref={wrapperDate}\r\n        className={`picker${ showCalendar === true ? ' show' : showCalendar === false ? ' hide' : '' }`}\r\n        style={{\r\n          zIndex: zIndex\r\n        } as CSSProperties}\r\n      >\r\n        <DatePickerCalendar \r\n          elevation={elevationPicker} \r\n          lang={lang}\r\n          year={year}\r\n          month={month}\r\n          day={day}\r\n          intervalYearsSelection={intervalYearsSelection}\r\n          color={headerPickerColor}\r\n          onSelect={(date: Date, value:string) => {\r\n            const result: DatePickerResult = {\r\n              date: date,\r\n              value: value\r\n            }\r\n            setValueInput(value)\r\n            if(onSelect) onSelect(result)\r\n          }}\r\n          onClose={() => displayDatePicker(false)}\r\n        />\r\n      </div>\r\n      \r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default DatePicker\r\n"],"names":["useRef","useState","useEffect","_jsxs","__assign","_jsx","FontAwesomeIcon","faCalendar","DatePickerCalendar"],"mappings":"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"}